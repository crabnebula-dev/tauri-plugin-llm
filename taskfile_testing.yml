version: "3"

env:
  CONTAINER_RUNTIME: container
  CONTAINER_IMAGE_TAG: tauritest

tasks:
  default:
    silent: true
    desc: Shows all available tasks
    cmds:
      - task --list-all

  build_container:
    silent: true
    desc: Builds the container for Tauri tests
    cmds:
      - container build -f End2End.dockerfile -t tauritest .

  container:
    silent: true  
    desc: Spawns the current dir inside a container
    cmds:
      - $CONTAINER_RUNTIME run -ti -v $(pwd):/code --cpus 8 -m 16G tauritest